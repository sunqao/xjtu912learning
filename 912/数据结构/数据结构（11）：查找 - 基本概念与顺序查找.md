# 数据结构（十一）：查找 - 基本概念与顺序查找

## 基本概念

### 平均查找长度：

假设一个数组有`n`个元素`x1, x2, .... xn`，我们想要在其中查找元素`k`

**成功下的平均查找长度：**

其实也就是期望
$$
ASL(成功) = \Sigma_i (P_i * C_i)
$$
`Pi`是`k = xi`的概率，`Ci`是查找到`k`的比较次数，假设`k`与每个元素相等的概率相同的话，`Pi = 1 / n`

**失败下的平均查找长度：**

失败情况下的平均查找长度与成功不同，这里是根据区间来进行计算的，假设数组中有`n`个元素如下图所示，这`n`个数划分出来了`n + 1`个区间：

 ![Screenshot_2024-03-16-09-48-56-046_com.jideos.jno](https://typora-1310242472.cos.ap-nanjing.myqcloud.com/typora_img/Screenshot_2024-03-16-09-48-56-046_com.jideos.jno.png)

对于元素`k`来讲，它查找不到必然落在上图中的`n + 1`个区间之中，因此失败下的平均查找长度就是：
$$
ASL(失败) = \Sigma_i(P_i * C_i)
$$
`Pi`是`k`落在区间`i`的概率，`Ci`是落在每个区间的查找次数，假设`k`落在每个区间的概率相等的话，`Pi = 1 / (n + 1)`

所以平均查找长度其实与查找什么元素无关，是查找方式数据结构本身的性质

### **决策树（判定树）：**

 决策树其实就是每次比较的时候会出现不同的结果，然后在结果上进行分支，比如在第一个结点的时候有`> = <`三种情况，`>`的时候进入一个分支，`=`进入一个分支，`<`进入一个分支，进入每个分支后在分支结点进一步比较判定：

<img src="https://typora-1310242472.cos.ap-nanjing.myqcloud.com/typora_img/Screenshot_2024-03-16-11-03-50-875_com.jideos.jno.png" alt="Screenshot_2024-03-16-11-03-50-875_com.jideos.jno" style="zoom:50%;" />

可以用决策树分析不同查找方式的平均查找长度

## 顺序查找法

### 一般的线性表顺序查找：

假设线性表的元素为`x1, x2, x3, ....xn`

从前往后一个个看，顺序查找的决策树如下图所示：

<img src="https://typora-1310242472.cos.ap-nanjing.myqcloud.com/typora_img/Screenshot_2024-03-16-11-10-09-132_com.jideos.jno.png" alt="Screenshot_2024-03-16-11-10-09-132_com.jideos.jno" style="zoom:50%;" />

进入红色的分支表示查找成功，进入蓝色的分支表示查找失败

**成功平均查找长度：**

元素`k`与顺序表中每个元素相等的概率都相同，进入第一个分支的概率是`1 / n`，查找次数是`1`，进入第`i`个分支的概率是`1 / n`，查找次数是`i`，因此平均查找长度为：

`1 / n * (1 + 2 + 3 + ... + n) = (n + 1) / 2`

**失败的平均查找长度：**

查找失败是一定会落入蓝色的分支的，因此这个区间概率是`1`，落入这个分支的查找次数就是`n`，因此失败的平均查找长度就是`n`(有的教材是`n + 1`，与代码的写法有关，不用纠结)

### 有序的线性表顺序查找：

假定所有的元素都是不一样的，线性表的元素为`x1 < x2 < x3 < ... < xn`

有序的线性表的决策树如下图所示，蓝色表示查找失败落入失败的区间，红色分支表示查找成功：

<img src="https://typora-1310242472.cos.ap-nanjing.myqcloud.com/typora_img/Screenshot_2024-03-16-11-26-37-680_com.jideos.jno.png" alt="Screenshot_2024-03-16-11-26-37-680_com.jideos.jno" style="zoom:50%;" />

**查找成功的平均查找长度：**

落入第一个红色的分支查找一次，落入第二个红色的的分支查找两次，。。。，查找元素`k`与每个元素相等的概率是一样的，因此平均查找长度就是：

`1 / n * (1 + 2 + 3 + ... + n) = (n + 1) / 2`

**查找失败的平均查找长度：**

一共有`n + 1`个区间，落入每个区间的概率是相同的是`1 / (n + 1)`，落入第一个区间的查找次数是一次，落入第一个区间的查找次数是两次，落入第`n`个区间的查找次数是`n`次，落入第`n + 1`个区间的查找次数是`n`次，因此失败的平均查找次数就是：

`1 / (n + 1) * (1 + 2 + 3 + ... + n + n) = (n^2 + 3n) / (n + 1)`

